<!DOCTYPE html>
<html>

<head>
    <title>Math And Color</title>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

</head>
<style type="text/css">
/**
TODO: move css to a separate file
TODO: my requirement for css;

For any device/browser size smaller than 1000 px(A4), display as 1 column.
Anything larger than 1000 px, display side by side.

Ideal device is having display resolution of 1200 px.

Kids have to print and do math on the image..so any device smaller than A4, 
is not ideal way to use this app.

This does NOT stop the user to minimize the view and increase the font size
of fields.

TODO:

Functionalities to check before each check in.

1. Add text on all 4 corners. Auto-repositioning must happen.
2. Add text in other areas.
3. Editing existing text should work seamlessly.
4. print as pdf must work.
5. hide inputs.
6. show inputs.
7. hide advanced.
8. show advanced.

**/
    body{ 
        background-color: ivory; 
    }
    #bannerDivId
    {
        text-align: center;
        width: 80%;
    }
    #wrapper{
        position:relative;
        min-width:1000px;
        min-height:1000px;
        width:1000px;
        height:1000px;
        max-width:1000px;
        max-height:1000px;
    }
    #bkImage{
        position:absolute; 
        top:0px; 
        width:100%;
        height:100%;
    }
    #myCanvas{
        position:absolute; 
        top:0px; 
        left:0px;
        border:1px solid black;
        width:100%;
        height:100%;
        text-align:center;
    }
    label {
      width: 200px;
      /**padding-right: 20px;**/
      display: inline-block;
    }
    /**
    http://css-plus.com/2010/11/how-to-horizontally-centre-anything-with-css/
    What this does is, it causes the whole thing to be centere aligned.
    However the field set does not re-align one below the other, if the
    page is re-sized.

    My requirement is for the image to be viewed at its best, so this is ok to me.
    If i resize and the x,y a,b becomes visible, still you cannot see the image 
    and all its text.
    **/
    .container{
        display: flex; 
        margin: 0 auto;
        font-size: 150%;
        /**padding: 25px;**/
    }
    /**
    http://stackoverflow.com/questions/12710799/two-fieldsets-with-display-inline-aligning-on-bottom
    **/
    .leftdiv,.rightdiv{
        padding-left: 10px;
    }
    input,button,label { font-size: 150%;  } 
    button{
        min-width: 100px;
    } 
    h1{
        font-size: 300%;
    }  
</style>
<body>
    <div id="bannerDivId">
        <h1>Learn And Color</h1>
    </div>
<div id="containerDivId" class="container">
    <div class="leftdiv"  id="leftDivId">
        <fieldset>
            <label for="numberAId">A:</label>
            <input class="form-control" type="name" maxlength="4" size="4" id="numberAId" placeholder="A"/>
            <br/>
         	<label for="operatorId">Operator:</label> 
            <select
				class="form-control" type="text" id="operatorId" style="width:128px;">
				<option>+</option>
				<option>-</option>
				<option>x</option>
				<option>&divide</option>
                <option>%</option>
			</select>
            <br/>
            <label for="numberBId">B:</label>
            <input class="form-control" type="name" maxlength="4" size="4" id="numberBId" placeholder="B"/>
        </fieldset>
        <fieldset>
            <button class="form-control" id="doneId" onclick="validateInput()">Add To Image</button>
            <br/>
            <button class="form-control" id="hideId" onclick="hideInputs()">Hide Inputs</button>
            <br/>
            <button class="form-control" id="configurationId" onclick="toggleAdvanced()">Advanced</button>
        </fieldset>
        <fieldset>
            <button class="form-control" id="showOtherImagesId" onclick="showOtherImages()">Other Images</button>
            <br/>
            <button class="form-control" id="prefillImageId" onclick="prefillImage()">Prefill Image</button>
            <br/>
            <input id="image_from_list" name="image_from_list" type="text" maxlength="10" size="10" value="none"  />
            <br/>
            <img src="images/butterfly.jpg" col="images/butterfly.jpg" border="0" width="50 px" height="50 px" 
            />
            <br/>
            <img src="images/puppy.gif" col="images/puppy.gif" border="0" width="50 px" height="50 px"
            />
            <br/>
            <img src="images/teddyBear.jpg" col="images/teddyBear.jpg" border="0" width="50 px" height="50 px"
            />
            <img src="images/dora.gif" col="images/dora.gif" border="0" width="50 px" height="50 px"
            />
            <br/>
        </fieldset>
    </div>
    <!--http://stackoverflow.com/questions/12886286/addeventlistener-for-keydown-on-canvas
    Added tab index, to make canvas focusable. Unlike other html elements, it is NOT
    focusable by default.
    -->

    <!--<canvas id="myCanvas" width="1000" height="1000" style="border:1px solid #d3d3d3;" tabindex="1" 
    onclick="mouseMoveHandler(this,event)">
        Your browser does not support the HTML5 canvas tag.
    </canvas>-->

    <div id="wrapper" class="formgroup">
        <!--
        http://stackoverflow.com/questions/18431332/delete-only-text-but-not-the-image-using-canvas
        http://jsfiddle.net/m1erickson/fg5sV/
        INFO: both canvas and image overlap.Only the text goes on to the canvas.
        -->
        <img id="bkImage" src="images/dora.gif"
         width=1000 height=1000></canvas>
        <canvas id="myCanvas" width=1000 height=1000 tabindex="1" 
    onclick="mouseMoveHandler(this,event)">
        Your browser does not support the HTML5 canvas tag.
        </canvas>
    </div>

    <div class="rightdiv" id="rightDivId">
        <fieldset class="fieldSet1">
            <label id="contentCoordinateLabelId" for="contentCoordinateId" >Add/Edit #:</label>
            <div id="editMessageDivId"></div>
            <input class="form-control" type="hidden" id="contentCoordinateId" size="4" placeholder="-1 or 1,2"/>
            <br/>
            <label for="xId">X:</label>
            <input class="form-control" type="name" id="xId" size="4" placeholder="X"/>
            <br/>
            <label for="yId">Y:</label>
            <input class="form-control" type="name" id="yId" size="4" placeholder="Y"/>
            <br/>
            <label for="fontSizeId">Font Size:</label>
            <input class="form-control" type="name" id="fontSizeId" size="4" value="40"/>
        </fieldset>    
    </div>

    </div>
    <script type="text/javascript">

        var FONT_SIZE = $('#fontSizeId').val();
        var mousePos;
        var contentCoordinateHistory=[];


        window.onload = function() {
            draw();
            toggleAdvanced();
        };
        //INFO: outside of onload

        $("div#leftDivId img").click(function () {
            $("div#leftDivId img").attr("border","0");
            $(this).attr("border","4");
            $("input#image_from_list").val($(this).attr("col"));
            $('#bkImage').attr('src',$(this).attr("col"));
        }); 

        function toggleAdvanced(){
            $(".fieldSet1").toggle(); 
        }

        function addToHistory(contentCoordinate){
            contentCoordinate.setId(Number(contentCoordinateHistory.length+1));
            contentCoordinateHistory.push(contentCoordinate);
        }

        function erase(canvas) {
            var context = canvas.getContext("2d");
            context.clearRect(0, 0, canvas.width, canvas.height);
        }
        function draw() {
            var canvas = document.getElementById("myCanvas");
            var context = canvas.getContext("2d");
            context.font = FONT_SIZE+"pt Calibri";
            context.fillText("Name:", 30, FONT_SIZE);
            //Fill your name
            context.fillText("__________", 30, (3*Number(FONT_SIZE)));
            context.fillText("_______", 30, (5*Number(FONT_SIZE)));
        }

        //INFO: capture the last position of mouse, by mouse listener.
        //on key down, write to the last known position of the mouse.

        function mouseMoveHandler(canvas, event) {
            showInputs();
            mousePos = getMousePos(canvas, event);
            var fontSize=$("#fontSizeId").val();
            var contentCoordinate = new ContentCoordinateGroup(mousePos.x,mousePos.y," "," "," ",fontSize);
            contentCoordinate.adjust(canvas);
            var contentCoordinateWithinLimits = contentCoordinate.isAnyWithinLimits(contentCoordinateHistory);
            var nextCoordinateNumber;
            if(contentCoordinateWithinLimits){
                console.log("near/on existing position is being clicked");
                populateExistingCordinate(contentCoordinateWithinLimits);
            }else{
                if( (contentCoordinateHistory) && contentCoordinateHistory.length > 0) {
                    nextCoordinateNumber = Number(contentCoordinateHistory.length) + 1;
                }else{
                    nextCoordinateNumber = 1;
                }
                console.log("new position is being clicked");
                $("#xId").val(contentCoordinate.position.x);
                $("#yId").val(contentCoordinate.position.y);
                //TODO: check for overlap.
                $("#numberAId").focus();
                $("#contentCoordinateId").val("-1");
                $('#contentCoordinateLabelId').text("Adding "+ nextCoordinateNumber);
                $("#editMessageDivId").text("");                
            }
        }
        /**
        http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/
        **/
        function getMousePos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();
            var x = Math.round(evt.clientX - rect.left);
            var y = Math.round(evt.clientY - rect.top);
            return {
                x: x,
                y: y
            };
        }

        function Position(x,y) {
            this.x=x;
            this.y=y;
            this.printValue=function(){
                return "(x="+this.x+",y="+this.y+")";
            }
            this.getNumberX= function() {
                return Number(x);
            }
            this.getNumberY= function() {
                return Number(y);
            }
        }

        //INFO:Class ContentCoordinateGroup, group text starting at a particular coordinate.
        //Say, starting at x,y display 33+40=__. 
        //Functions:
        //1. Any time it exceeds coordinates of canvas re-adjust.
        //2. Any time this falls with in range of another co-ordinate,
        //do not return the instance.
        //3. Given x,y , calculate appropriately for A,B,operator and ___ text.

        function ContentCoordinateGroup(x, y, a,b,operator,fontSize) {
            this.position=new Position(x,y);
            this.a = a;
            this.b = b;
            this.operator = operator;
            this.id=-1;
            this.editReason="";
            this.fontSize=fontSize;
            this.setId=function(id){
                this.id=id;
            }
            this.adjust = function (canvas) {
                console.log("adjust");
                //INFO: Calculate space taken by 40 px character.
                var delta =  Number(Number(fontSize)*(Math.max(a.length,b.length)));
                //left, top, right, bottom, x, y, width, height
                var canvasBounds = canvas.getBoundingClientRect();
                console.log("canvasBounds.x:"+canvasBounds.x);
                console.log("canvasBounds.left:"+canvasBounds.left);
                console.log("canvasBounds.right:"+canvasBounds.right);
                console.log("Number(x):"+Number(this.position.x));
                console.log("delta: "+fontSize+"*(Math.max(a.length,b.length)):"
                    +delta);
                console.log("canvasBounds.top:"+canvasBounds.top);
                console.log("canvasBounds.bottom:"+canvasBounds.bottom);
                console.log("canvasBounds.y:"+canvasBounds.y);
                console.log("Number(y):"+Number(this.position.y));

                //INFO: align to right margin.
                if( (Number(this.position.x)+Number(delta)+canvasBounds.left)  > canvasBounds.right) {
                    console.log("readjusted x for right bounds from x :"+this.position.x);
                    this.position.x = Math.round(Number(canvasBounds.right) - Number(delta) - canvasBounds.left);
                    console.log("to :"+this.position.x);
                }
                //INFO: align for the one -/+/* character
                if( (Number(this.position.x)+canvasBounds.left-Number(fontSize))  < canvasBounds.left) {
                    console.log("readjusted x for left bounds from x :"+x);
                    this.position.x = Number(fontSize);
                    console.log("to :"+this.position.x);
                }
                //INFO:Basically adjusting for
                // 32
                //+44
                //=76
                //3 font sizes,3*40=120
                console.log("( Number(y) + Number(canvasBounds.top) + (3*Number(fontSize)) ) > canvasBounds.bottom");
                console.log(( Number(this.position.y) + Number(canvasBounds.top) + (3*Number(fontSize)) ) + " > " + canvasBounds.bottom);
                if( ( Number(this.position.y) + Number(canvasBounds.top) + (3*Number(fontSize)) ) > canvasBounds.bottom) {
                    console.log("readjusted y for bottom from y :"+y);
                    this.position.y = canvasBounds.bottom - Number(canvasBounds.top) - (3*Number(fontSize));
                    console.log("to :"+this.position.y);
                }
                //INFO: the numbers are starting somewhere in the middle, so ensuring 1 font size gap at top
                console.log("( Number(y) + Number(canvasBounds.top) - Number(fontSize) ) < canvasBounds.top");
                console.log( ( Number(this.position.y) + Number(canvasBounds.top) - Number(fontSize) ) + " < " + canvasBounds.top);
                if( ( Number(this.position.y) + Number(canvasBounds.top) - Number(fontSize) ) < canvasBounds.top) {
                    console.log("readjusted y for top from y :"+this.position.y);
                    this.position.y = canvasBounds.top - Number(canvasBounds.top) + Number(fontSize);
                    console.log("to :"+this.position.y);
                }
            }

            this.getBCoordinate = function(){
                console.log("Number(fontSize)"+Number(fontSize));
                return {
                    x: this.position.x,
                    y: (Number(this.position.y) + Number(fontSize))
                };
            }
            this.getLineLength = function() {
                var lineLength = Math.max(a.length,b.length);
                console.log("Line Length:"+lineLength);
                return lineLength;
            }
            this.getLine = function() {
                //TODO: Note, you may have to bind "this" to correct object instance.
                //to avoid confusion with in js.
                var lineLength = this.getLineLength();
                var line="";
                while(lineLength > 0) {
                    line = line + "_";
                    lineLength = lineLength - 1;
                }
                return line;   
            }
            this.getLine1Coordinate = function(){
                console.log("Number(fontSize)"+Number(fontSize));
                return {
                    x: this.position.x,
                    y: (Number(this.position.y) + (Number(1.25)*Number(fontSize)))
                };
            }
            this.getLine2Coordinate = function(){
                console.log("Number(fontSize)"+Number(fontSize));
                return {
                    x: this.position.x,
                    y: (Number(this.position.y) + (Number(2.5)*Number(fontSize)))
                };
            }
            this.getOperatorCoordinate = function() {
                var x1 = Number(this.position.x)-Math.round(Number(fontSize)/2);
                var y1 = Number(this.position.y)+Math.round(Number(fontSize)/2);
                return {
                    x:x1,
                    y:y1
                }
            }
            this.getMinX=function(padding){
                console.log("Math.round(Number(this.position.x) - Number(padding))");
                console.log("Math.round("+
                    Number(this.position.x) +"-"+ Number(padding)  +
                    ")");
                console.log("Math.round("+
                    ( Number(this.position.x) - Number(padding) ) +
                    ")");
                return Math.round(Number(this.position.x) - Number(padding));
            }
            this.getMaxX=function(padding){
                var lineLength = Number(fontSize)*Number(this.getLineLength());
                return Math.round(Number(this.position.x) + Number(padding) + Number(lineLength));                
            }
            this.getMinY=function(padding){
                return Math.round(Number(this.position.y) - Number(padding));
            }
            this.getMaxY=function(padding){
                var verticalHeight = Number(fontSize)*Number(3.5);
                return Math.round(Number(this.position.y) + Number(padding) + Number(verticalHeight));                
            }
            this.isAnyWithinLimits = function(contentCoordinateHistory) {
                var contentCoordinateWithinLimits = null;
                if( (contentCoordinateHistory) && contentCoordinateHistory.length > 0) {
                    for (var j = 0; j < contentCoordinateHistory.length; j++){
                        console.log("Checking "
                         + contentCoordinateHistory[j].printValue() +" with "+ this.printValue());
                        //TODO: do whether the clicked coordinates are with in limits, on click, instead of
                        //doing it on click of "Done" button
                        withinLimits = contentCoordinateHistory[j].isWithinLimits(this);
                        if(withinLimits) {
                            console.log("With in limits:" + withinLimits);
                            contentCoordinateWithinLimits = contentCoordinateHistory[j];
                            j = contentCoordinateHistory.length;
                        }
                    }
                }
                return contentCoordinateWithinLimits;
            }            
            this.isWithinLimits = function(contentCoordinate) {
                console.log("checking :"+this.printValue() +
                    "against contentCoordinate:"+contentCoordinate.printValue());
                var minX = this.getMinX(Math.round(Number(fontSize)/4));
                var minX1 = contentCoordinate.getMinX(Math.round(Number(fontSize)/4));
                console.log("minX1:"+minX1);

                var minY = this.getMinY(Math.round(Number(fontSize)/4));
                var minY1 = contentCoordinate.getMinY(Math.round(Number(fontSize)/4));
                console.log("minY1:"+minY1);
                
                var maxX = this.getMaxX(Math.round(Number(fontSize)/4));
                var maxX1 = contentCoordinate.getMaxX(Math.round(Number(fontSize)/4));
                console.log("maxX1:"+maxX1);
                
                var maxY = this.getMaxY(Math.round(Number(fontSize)/4));
                var maxY1 = contentCoordinate.getMaxY(Math.round(Number(fontSize)/4));
                console.log("maxY1:"+maxY1);
                
                var withinLimits=false;
                console.log("Does minX1,maxX1 Falls with in x coordinates minX and maxX ?");
                console.log("("+minX1+","+maxX1
                    +") Falls with in x coordinates ("+minX
                    +") and ("+maxX
                    +")");
                //
                if( 
                    ( ( minX <= maxX1 ) && ( maxX >= maxX1 ) ) ||
                    ( ( minX <= minX1 ) && ( maxX >= minX1 ) )
                 ) {
                    console.log("minX1,maxX1 Falls with in x coordinates minX and maxX");
                    withinLimits=true;
                }
                console.log("Does minY1,maxY1 Fall with in y coordinates minY and maxY ?");
                console.log("("+minY1+","+maxY1
                    +") Falls with in y coordinates ("+minY
                    +") and ("+maxY
                    +")");
                if( 
                    ( withinLimits ) && 
                    (
                        ( ( minY <= maxY1 ) && ( maxY >= maxY1 ) ) ||
                        ( ( minY <= minY1 ) && ( maxY >= minY1 ) )
                    )
                 ) {
                    console.log("minY1,maxY1 Fall with in y coordinates minY and maxY");
                }else{
                    withinLimits=false;                    
                }
                if(withinLimits) {
                    console.log("(x,y) Falls with in x coordinates (x1,y1) and (x2,y2)");
                    console.log("("+contentCoordinate.position.x+","+contentCoordinate.position.y+") Falls with in ("+minX+","+
                        minY+") and ("+maxX+","+maxY+")");
                }
                return withinLimits;
            }
            this.printValue= function() {
                return "id="+this.id+" ("+x+","+ y+") : "+a+operator+b+"=?";
            }            
        }

        //INFO:Instead of adding it on load, if we add it as event based on canvas element,
        //then it can be re-used across pages.
        //Later this can also be made data driven.
        //canvas.addEventListener("keyup", keyUpHandler, true);
        //canvas.addEventListener('mousemove',mouseMoveHandler,true);

        function addletter(canvas, letter, x, y,fontSize) {
            var context = canvas.getContext("2d");
            context.font = fontSize+"pt Calibri";
            //keyHistory += letter;
            //INFO: clears a lot of area so commented.
            //context.clearRect(x, y, x+20, y+50);
            context.fillText(letter, x, y );
        }

        function addLetterToA(canvas,contentCoordinate) {
            console.log("Adding letter to A");
            console.log("canvassing...");
            console.log("adding...(x,y)=("+contentCoordinate.position.x+","+contentCoordinate.position.y+")");
            addletter(canvas, contentCoordinate.a, contentCoordinate.position.x, contentCoordinate.position.y,contentCoordinate.fontSize);
            console.log("added...");
        }
        function addLetterToB(canvas,contentCoordinate) {
            console.log("Adding letter to B");
            console.log("canvassing...");
            var bCoordinate=contentCoordinate.getBCoordinate();
            console.log("adding...(x,y)=("+bCoordinate.x+","+bCoordinate.y+")");
            //INFO: write in next line.
            addletter(canvas, contentCoordinate.b, bCoordinate.x, bCoordinate.y,contentCoordinate.fontSize);
            console.log("added...");            
        }
        function addLine1(canvas,contentCoordinate) {
            console.log("Adding line1");
            console.log("canvassing...");
            var line1Coordinate=contentCoordinate.getLine1Coordinate();
            console.log("adding...(x,y)=("+line1Coordinate.x+","+line1Coordinate.y+")");
            var line=contentCoordinate.getLine();
            //INFO: write in next line.
            addletter(canvas, line, line1Coordinate.x, line1Coordinate.y,contentCoordinate.fontSize);
            console.log("added...");            
        }       
        function addLine2(canvas,contentCoordinate) {
            console.log("Adding line2");
            console.log("canvassing...");
            var line2Coordinate=contentCoordinate.getLine2Coordinate();
            console.log("adding...(x,y)=("+line2Coordinate.x+","+line2Coordinate.y+")");
            //INFO: write in next line.
            var line=contentCoordinate.getLine();
            addletter(canvas, line, line2Coordinate.x, line2Coordinate.y,contentCoordinate.fontSize);
            console.log("added...");            
        }           
        function addLetterToOperator(canvas,contentCoordinate){
            //TODO: refactor this function.
            console.log("Adding letter to Operator");
            console.log("canvassing...");
            var operatorCoordinate = contentCoordinate.getOperatorCoordinate();
            console.log("adding...(x1,y1)=("+operatorCoordinate.x+","+operatorCoordinate.y+")");
            //INFO: write it between 2 numbers, slightly to left
            addletter(canvas, contentCoordinate.operator, operatorCoordinate.x, operatorCoordinate.y,contentCoordinate.fontSize);
            console.log("added...");
        }
		//Validate the input and add text.
		function validateInput() {
            var letterA = $('#numberAId').val();
            //TODO: explain the regex.
             if (/\D/.test(letterA)) {
				alert( letterA + " is not a number. Please enter a valid number for A." );
            	$('#numberAId').focus() ;
            	return false; 
            }
            //TODO: explain regex.
            var letterB = $('#numberBId').val();                       
            if (/\D/.test(letterB)) {
				alert( letterB + " is not a number. Please enter a valid number for B." );
            	$('#numberBId').focus() ;
            	return false; 
            }
            addContent();
        }
        function addContent() {
            var x=$('#xId').val();
            var y=$('#yId').val();
            var letterA = $('#numberAId').val();
            var letterB = $('#numberBId').val();
            var operator = $('#operatorId').val();
            var fontSize = $('#fontSizeId').val();
            var canvas = document.getElementById("myCanvas");
            var contentCoordinateId=$('#contentCoordinateId').val();
            var contentCoordinateWithinLimits;
            //INFO: Editing existing coordinate.
            var currentContentCoordinateGroup;

            var contentCoordinate = new ContentCoordinateGroup(x,y,letterA,letterB,operator,fontSize);
            //INFO: adjust it, just in case x and y are edited.
            contentCoordinate.adjust(canvas);

            if(contentCoordinateId>0) {
                console.log("Editing contentCoordinateId"+contentCoordinateId);
                x=contentCoordinate.position.x;
                y=contentCoordinate.position.y;
                $('#xId').val(x);
                $('#yId').val(y);            
                contentCoordinate.setId(contentCoordinateId);
                contentCoordinateHistory[contentCoordinateId-1]=contentCoordinate;
                //TODO: redraw.
                console.log("Redrawing");
                erase(canvas);
                draw();
                console.log("total:"+contentCoordinateHistory.length);
                for (var j = 0; j < contentCoordinateHistory.length; j++){
                    currentContentCoordinateGroup = contentCoordinateHistory[j];
                    console.log("currentContentCoordinateGroup:"+currentContentCoordinateGroup.printValue());
                    addLetterToA(canvas,currentContentCoordinateGroup);
                    addLetterToOperator(canvas,currentContentCoordinateGroup);
                    addLetterToB(canvas,currentContentCoordinateGroup);
                    addLine1(canvas,currentContentCoordinateGroup);
                    addLine2(canvas,currentContentCoordinateGroup);
                }
                //INFO: End of editing existing coordinate.
            }else{
                //INFO: adding a new coordinate.
                //INFO: checking if new coordinate is with in limits of any of old coordinates.
                contentCoordinateWithinLimits = contentCoordinate.isAnyWithinLimits(contentCoordinateHistory);
                if(contentCoordinateWithinLimits == null) {
                    console.log("Adding new values");
                    x=contentCoordinate.position.x;
                    y=contentCoordinate.position.y;
                    $('#xId').val(x);
                    $('#yId').val(y);            
                    addLetterToA(canvas,contentCoordinate);
                    addLetterToOperator(canvas,contentCoordinate);
                    addLetterToB(canvas,contentCoordinate);
                    addLine1(canvas,contentCoordinate);
                    addLine2(canvas,contentCoordinate);
                    addToHistory(contentCoordinate);
                    console.log("total"+contentCoordinateHistory.length);                
                }else {
                    console.log("New value is existing value, so Populating existing values");
                    contentCoordinateWithinLimits.editReason="Because Space for 1 digit, instead of "+ contentCoordinate.getLineLength() + " digits.";
                    //INFO: populate x,y a,b,operator and TODO: id.
                    populateExistingCordinate(contentCoordinateWithinLimits);
                }
            }
        }
        function populateExistingCordinate(contentCoordinateWithinLimits) {
            $('#xId').val(contentCoordinateWithinLimits.position.x);
            $('#yId').val(contentCoordinateWithinLimits.position.y);            
            $('#numberAId').val(contentCoordinateWithinLimits.a);
            $('#numberBId').val(contentCoordinateWithinLimits.b);
            $('#operatorId').val(contentCoordinateWithinLimits.operator);
            $('#contentCoordinateId').val(contentCoordinateWithinLimits.id);     
            $('#contentCoordinateLabelId').text("Editing #"+contentCoordinateWithinLimits.id);     
            $('#editMessageDivId').text(contentCoordinateWithinLimits.editReason);     
        }
        function showInputs() {
            $("#leftDivId").show();
            $("#rightDivId").show();
            $("#bannerDivId").width(1600);     
        }
        function hideInputs() {
            $("#leftDivId").hide();
            $("#rightDivId").hide();       
            $("#bannerDivId").width(1000);     
        }
        function prefillImage() {
            console.log("prefillImage");
        }
    </script>

</body>

</html>